var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{T as o,r as i,a as r,w as l,s as c,o as d,c as m,b as p,p as h,d as u,t as v,e as g,f as w,F as b,L as x,g as f,h as q,P as y,i as M,S as k,D as j,j as C}from"./vendor.818b9458.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const i=new URL(e,a);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),s(l)},onload(){n(self[t].moduleMap[i]),s(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("assets/");o.loop=!1,o.loopEnd="8m";const T=i({bpm:120,started:!1,playing:!1,root:0,loud:!0,progress:0,position:0,metre:{over:4,under:4,num:4},scale:"minor"}),z=r(T);function A(e){T.scale=e}function B(){T.loud=!T.loud}const H={setOver(e){T.metre.over=Number(e)},setUnder(e){T.metre.under=Number(e)}};l((()=>{o.timeSignature=[T.metre.over,T.metre.under],T.metre.num=(T.metre.over/(T.metre.under/4)).toFixed(2)}));const L={play(){T.playing||(T.playing=!0,o.start(),T.started||(c(),T.started=!0),requestAnimationFrame((function e(){T.progress=o.progress,T.position=o.position,T.playing&&requestAnimationFrame(e)})))},pause(){T.playing&&(o.pause(),T.playing=!1)},stop(){T.playing=!1,o.stop(),T.progress=o.progress}};function P(e){T.root=e}const R=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],_=[0,1,0,0,1,0,1,0,0,1,0,1];function D(e=0,t=3,n=1){return"hsla("+30*e+","+100*n+"%,"+8*Math.abs(t+2)+"%)"}const N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1536 1536",style:{"vertical-align":"middle"}},O=p("path",{d:"M1536 64v1408q0 26-19 45t-45 19H64q-26 0-45-19t-19-45V64q0-26 19-45T64 0h1408q26 0 45 19t19 45z",fill:"currentColor"},null,-1);var I={render:function(e,t){return d(),m("svg",N,[O])}};const S={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1536 1536",style:{"vertical-align":"middle"}},$=p("path",{d:"M1536 64v1408q0 26-19 45t-45 19H960q-26 0-45-19t-19-45V64q0-26 19-45t45-19h512q26 0 45 19t19 45zm-896 0v1408q0 26-19 45t-45 19H64q-26 0-45-19t-19-45V64q0-26 19-45T64 0h512q26 0 45 19t19 45z",fill:"currentColor"},null,-1);var U={render:function(e,t){return d(),m("svg",S,[$])}};const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1408 1600",style:{"vertical-align":"middle"}},F=p("path",{d:"M1384 831L56 1569q-23 13-39.5 3T0 1536V64q0-26 16.5-36T56 31l1328 738q23 13 23 31t-23 31z",fill:"currentColor"},null,-1);var E={render:function(e,t){return d(),m("svg",V,[F])}};const Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1664 1472",style:{"vertical-align":"middle"}},G=p("path",{d:"M768 192v1088q0 26-19 45t-45 19t-45-19L326 992H64q-26 0-45-19T0 928V544q0-26 19-45t45-19h262l333-333q19-19 45-19t45 19t19 45zm384 544q0 76-42.5 141.5T997 971q-10 5-25 5q-26 0-45-18.5T908 912q0-21 12-35.5t29-25t34-23t29-36t12-56.5t-12-56.5t-29-36t-34-23t-29-25t-12-35.5q0-27 19-45.5t45-18.5q15 0 25 5q70 27 112.5 93t42.5 142zm256 0q0 153-85 282.5T1098 1207q-13 5-25 5q-27 0-46-19t-19-45q0-39 39-59q56-29 76-44q74-54 115.5-135.5T1280 736t-41.5-173.5T1123 427q-20-15-76-44q-39-20-39-59q0-26 19-45t45-19q13 0 26 5q140 59 225 188.5t85 282.5zm256 0q0 230-127 422.5T1199 1442q-13 5-26 5q-26 0-45-19t-19-45q0-36 39-59q7-4 22.5-10.5t22.5-10.5q46-25 82-51q123-91 192-227t69-289t-69-289t-192-227q-36-26-82-51q-7-4-22.5-10.5T1148 148q-39-23-39-59q0-26 19-45t45-19q13 0 26 5q211 91 338 283.5T1664 736z",fill:"currentColor"},null,-1);var J={render:function(e,t){return d(),m("svg",Y,[G])}};const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 768 1280",style:{"vertical-align":"middle"}},W=p("path",{d:"M768 96v1088q0 26-19 45t-45 19t-45-19L326 896H64q-26 0-45-19T0 832V448q0-26 19-45t45-19h262L659 51q19-19 45-19t45 19t19 45z",fill:"currentColor"},null,-1);var Q={render:function(e,t){return d(),m("svg",K,[W])}};const X=g();h("data-v-1de54716");const Z={class:"flex items-center justify-center p-4"},ee={class:"title"},te={class:"control"},ne=p("div",{class:"spacer"},null,-1);u();const ae=X(((e,t,n,a,s,o)=>{const i=I,r=U,l=E,c=J,h=Q;return d(),m("section",Z,[p("div",ee,"JAM SESSION IN "+v(a.notes[a.state.root]),1),p("div",te,[p("button",{onClick:t[1]||(t[1]=t=>e.stop())},[p(i)]),p("button",{onClick:t[2]||(t[2]=t=>e.pause())},[p(r)]),p("button",{onClick:t[3]||(t[3]=t=>e.play())},[p(l)]),p("button",{onClick:t[4]||(t[4]=e=>a.toggleLoud())},[a.state.loud?(d(),m(c,{key:0})):(d(),m(h,{key:1}))])]),ne])}));const se={methods:{},setup:()=>((e,o)=>{for(var i in o||(o={}))t.call(o,i)&&s(e,i,o[i]);if(n)for(var i of n(o))a.call(o,i)&&s(e,i,o[i]);return e})({state:z,notes:R,toggleLoud:B},L)};se.render=ae,se.__scopeId="data-v-1de54716";const oe={props:{num:{type:Number,default:120},min:{type:Number,default:30},max:{type:Number,default:360}},emits:["update"],mounted(){this.$refs.ce.innerText=this.num},data:()=>({edit:!1}),watch:{num(e){this.$refs.ce.innerText=this.num}},methods:{activate(){this.edit=!0,this.$refs.ce.innerText="",this.$nextTick((()=>{this.$refs.ce.focus()}))},update:function(e){var t=e.charCode||e.keyCode;(isNaN(String.fromCharCode(e.which))&&46!=t||32===t||13===t||46===t&&e.currentTarget.innerText.includes("."))&&e.preventDefault()},fix(){let e=event.target.innerText;e=e<this.min?this.min:e,e=e>this.max?this.max:e,this.$emit("update",e),this.$refs.ce.innerText=e,this.edit=!1}}},ie=g()(((e,t,n,a,s,o)=>(d(),m("div",{class:["editable",{active:s.edit}],ref:"ce",onClick:t[1]||(t[1]=e=>o.activate()),contenteditable:s.edit,onKeypress:t[2]||(t[2]=(...e)=>o.update&&o.update(...e)),onBlur:t[3]||(t[3]=(...e)=>o.fix&&o.fix(...e)),onKeyup:t[4]||(t[4]=w(((...e)=>o.fix&&o.fix(...e)),["enter"]))},null,42,["contenteditable"]))));oe.render=ie,oe.__scopeId="data-v-160e7576";const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1408 1280",style:{"vertical-align":"middle"}},le=p("path",{d:"M1408 480v192q0 40-28 68t-68 28H96q-40 0-68-28T0 672V480q0-40 28-68t68-28h1216q40 0 68 28t28 68z",fill:"currentColor"},null,-1);var ce={render:function(e,t){return d(),m("svg",re,[le])}};const de={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1408 1408",style:{"vertical-align":"middle"}},me=p("path",{d:"M1408 608v192q0 40-28 68t-68 28H896v416q0 40-28 68t-68 28H608q-40 0-68-28t-28-68V896H96q-40 0-68-28T0 800V608q0-40 28-68t68-28h416V96q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z",fill:"currentColor"},null,-1);var pe={render:function(e,t){return d(),m("svg",de,[me])}};const he=g();h("data-v-61e2da6a");const ue={class:"num text-9xl pb-8 font-bold cursor-pointer select-none"},ve={class:"bar"},ge={class:"adjust"},we={class:"info"},be={class:"block"};u();const xe=he(((e,t,n,a,s,o)=>{const i=oe,r=ce,l=pe;return d(),m("section",null,[p("div",ue,[p(i,{num:s.bpm,onUpdate:t[1]||(t[1]=e=>o.setBPM(e))},null,8,["num"])]),p("div",ve,[p("div",ge,[p("button",{onClick:t[2]||(t[2]=e=>o.stepBPM(-1))},[p(r)]),p("button",{onClick:t[3]||(t[3]=e=>o.stepBPM(1))},[p(l)])]),p("div",we,[p("div",be,v(o.hz)+"Hz",1),p("div",{class:"block invert",style:{backgroundColor:o.color}},v(o.note),5)]),p("div",{class:["indicator",{blink:s.blink}]},v(a.state.position),3)])])}));const fe={name:"bpm",data:()=>({edit:!1,bpm:100,playing:!1,progress:0,blink:!1}),setup:()=>({state:z}),computed:{hz(){return(this.bpm/60).toFixed(2)},note(){return b(this.hz).toNote()},digit(){return(b(this.hz).toMidi()+120+3)%12},color(){return"hsla("+30*this.digit+",100%,50%, 1)"}},methods:{setBPM(e){var t;this.bpm=Number(e),t=this.bpm,T.bpm=t,o.bpm.rampTo(t,1)},stepBPM(e){this.bpm+=e,this.bpm<30&&(this.bpm=30),this.bpm>360&&(this.bpm=360)}},mounted(){new x((e=>{this.blink=!0,setTimeout((()=>{this.blink=!1}),60)}),"4n").start(0)}};fe.render=xe,fe.__scopeId="data-v-61e2da6a";const qe=g();h("data-v-cf083cc2");const ye={class:"sig"},Me={class:"sign"},ke={class:"sign under"},je={class:"cycle"};u();const Ce=qe(((e,t,n,a,s,o)=>{const i=oe;return d(),m("section",null,[p("div",ye,[p("div",Me,[p(i,{num:a.state.metre.over,min:1,max:32,onUpdate:t[1]||(t[1]=e=>a.metre.setOver(e))},null,8,["num"])]),p("div",ke,v(a.state.metre.under),1)]),p("div",je,[(d(!0),m(f,null,q(a.state.metre.over,(e=>(d(),m("div",{class:{active:e==a.over.current.value},key:e},v(e),3)))),128))])])}));const Te={components:{editableNumber:oe},setup(){const e=function(e){let n=M(0),a=i([1,2,3,4]),s=new k(((e,a)=>{z.loud&&(1==a?(t.resonance=.94,t.triggerAttackRelease(R[z.root]+"4","16n",e)):(t.resonance=.8,t.triggerAttackRelease(R[(z.root+7)%12]+"4","16n",e))),j.schedule((()=>{n.value=a}),e)}),[1,2,3,4],"4n").start(0);return l((()=>{a.length=0;for(let t=1;t<=z.metre[e];t++)a.push(t);s.events=a})),l((()=>{z.playing||(n.value=0)})),{current:n}}("over"),t=(new y).toDestination();return{state:z,metre:H,over:e}}};Te.render=Ce,Te.__scopeId="data-v-cf083cc2";const ze={major:{handle:"major",name:"Major (Ionian)",chords:["maj","","min","","min","maj","","7","","min","","dim"],steps:[1,0,1,0,1,1,0,1,0,1,0,1]},minor:{handle:"minor",name:"Minor (Aeolian)",chords:["min","","dim","maj","","min","","min","maj","","7",""],steps:[1,0,1,1,0,1,0,1,1,0,1,0]},dorian:{handle:"dorian",name:"Dorian",chords:["min","","min","maj","","7","","min","","dim","maj",""],steps:[1,0,1,1,0,1,0,1,0,1,1,0]},phrygian:{handle:"phrygian",name:"Phrygian",chords:["min","maj","","7","","min","","dim","maj","","min",""],steps:[1,1,0,1,0,1,0,1,1,0,1,0]},lydian:{handle:"lydian",name:"Lydian",chords:["maj","","7","","min","","dim","maj","","min","","min"],steps:[1,0,1,0,1,0,1,1,0,1,0,1]},mixolydian:{handle:"mixolydian",name:"Mixolydian",chords:["7","","min","","dim","maj","","min","","min","maj",""],steps:[1,0,1,0,1,1,0,1,0,1,1,0]},locrian:{handle:"locrian",name:"Locrian",chords:["dim","maj","","min","","min","maj","","7","","min",""],steps:[1,1,0,1,0,1,1,0,1,0,1,0]},majorPenta:{handle:"majorPenta",name:"Major pentatonic",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,0,0,1,0,1,0,0]},minorPenta:{handle:"minorPenta",name:"Minor pentatonic",chords:["","","","","","","","","","","",""],steps:[1,0,0,1,0,1,0,1,0,0,1,0]},acoustic:{handle:"acoustic",name:"Acoustic",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,0,1,1,0,1,0,0]},adonai:{handle:"adonai",name:"Adonai malakh",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,1,0,1,1,0,1,0]},algerian:{handle:"algerian",name:"Algerian",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,0,1,1,1,0,0,1]},augmented:{handle:"augmented",name:"Augmented",chords:["","","","","","","","","","","",""],steps:[1,0,0,1,1,0,0,1,1,0,0,1]},bebopDom:{handle:"bebopDom",name:"Bebop dominant",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,1,0,1,0,1,1,1]},bebopMaj:{handle:"bebopMaj",name:"Bebop major",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,1,0,1,1,1,0,1]},bluesHexa:{handle:"bluesHexa",name:"Blues hexatonic",chords:["","","","","","","","","","","",""],steps:[1,0,0,1,0,1,1,1,0,0,1,0]},doubleHarmonic:{handle:"doubleHarmonic",name:"Double harmonic",chords:["","","","","","","","","","","",""],steps:[1,1,0,0,1,1,0,0,1,1,0,1]},enigmatic:{handle:"enigmatic",name:"Enigmatic",chords:["","","","","","","","","","","",""],steps:[1,1,0,0,1,0,1,0,1,0,1,1]},gypsy:{handle:"gypsy",name:"Gypsy",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,0,1,1,1,0,1,0]},halfDim:{handle:"halfDim",name:"Half diminished",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,1,1,0,1,0,1,0]},harmonicMaj:{handle:"harmonicMaj",name:"Harmonic major",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,1,0,1,1,0,0,1]},harmonicMin:{handle:"harmonicMin",name:"Harmonic minor",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,1,0,1,1,0,0,1]},hungarianMin:{handle:"hungarianMin",name:"Hungarian minor",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,0,1,1,1,0,0,1]},istrian:{handle:"istrian",name:"Istrian",chords:["","","","","","","","","","","",""],steps:[1,1,0,1,1,0,1,1,0,0,0,0]},lydianAug:{handle:"lydianAug",name:"Lydian augmented",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,0,1,0,1,1,0,1]},majLocrian:{handle:"majLocrian",name:"Major locrian",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,1,1,0,1,0,1,0]},jazzMin:{handle:"jazzMin",name:"Jazz minor",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,1,0,1,0,1,0,1]},neapolitanMaj:{handle:"neapolitanMaj",name:"Neapolitan major",chords:["","","","","","","","","","","",""],steps:[1,1,0,1,0,1,0,1,0,1,0,1]},neapolitanMin:{handle:"neapolitanMin",name:"Neapolitan minor",chords:["","","","","","","","","","","",""],steps:[1,1,0,1,0,1,0,1,1,0,0,1]},octatonic:{handle:"octatonic",name:"Octatonic (diminished)",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,1,1,0,1,1,0,1]},persian:{handle:"persian",name:"Persian",chords:["","","","","","","","","","","",""],steps:[1,1,0,0,1,1,1,0,1,0,0,1]},phrygianDom:{handle:"phrygianDom",name:"Phrygian dominant",chords:["","","","","","","","","","","",""],steps:[1,1,0,0,1,1,0,1,1,0,1,0]},prometheus:{handle:"prometheus",name:"Prometheus",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,0,1,0,0,1,1,0]},tritone:{handle:"tritone",name:"Tritone",chords:["","","","","","","","","","","",""],steps:[1,1,0,0,1,0,1,1,0,0,1,0]},ukranianDorian:{handle:"ukranianDorian",name:"Ukranian dorian",chords:["","","","","","","","","","","",""],steps:[1,0,1,1,0,0,1,1,0,1,1,0]},wholeTone:{handle:"wholeTone",name:"Whole tone",chords:["","","","","","","","","","","",""],steps:[1,0,1,0,1,0,1,0,1,0,1,0]},chromatic:{handle:"chromatic",name:"Chromatic",chords:["1/1","25/24","9/8","6/5","5/4","4/3","45/32","3/2","8/5","5/3","9/5","15/8"],steps:[1,1,1,1,1,1,1,1,1,1,1,1]}},Ae=g();h("data-v-7aa9bbc6");const Be={class:"row"},He={class:"main"},Le={class:"choose"},Pe={class:"notes"};u();const Re=Ae(((e,t,n,a,s,o)=>(d(),m("section",null,[p("div",Be,[p("div",He,v(a.scales[a.state.scale].name),1),p("div",Le,[(d(!0),m(f,null,q(a.scales,((e,t)=>(d(),m("div",{class:["scale",{chosen:e.handle==a.state.scale}],onClick:t=>a.setScale(e.handle),key:t},v(e.name),11,["onClick"])))),128))])]),p("div",Pe,[(d(!0),m(f,null,q(a.notes,((e,t)=>(d(),m("div",{class:["note",{active:a.rootScale[t],main:t==a.state.root}],style:{backgroundColor:a.color(t)},onClick:e=>a.setRoot(t),key:t},v(e),15,["onClick"])))),128))])]))));const _e={setup(){const e=M([]);return l((()=>{let t=ze[z.scale].steps;z.root,e.value=((e,t=0)=>[...e.slice(t,e.length),...e.slice(0,t)])(t,-z.root)})),{setRoot:P,scales:ze,notes:R,state:z,setScale:A,rootScale:e,color:function(t){return z.root==t||e.value[t]?D(t):_[t]?"#444":"#aaa"}}}};_e.render=Re,_e.__scopeId="data-v-7aa9bbc6";const De=g();h("data-v-66cb3700");const Ne={class:"flex"},Oe={class:"flex flex-wrap w-full"};u();const Ie=De(((e,t,n,a,s,o)=>{const i=se,r=fe,l=Te,c=_e;return d(),m("div",{class:"p-2",id:"full-app",style:{backgroundColor:a.noteColor(a.state.root,0)}},[p("div",Ne,[p(i)]),p("div",Oe,[p(r),p(l)]),p(c)],4)}));const Se={name:"App",setup:()=>({state:z,noteColor:D})};Se.render=Ie,Se.__scopeId="data-v-66cb3700";C(Se).mount("#app");
